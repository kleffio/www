# =============================================================================
# Frontend Configuration
# =============================================================================
VITE_AUTH_CLIENT_ID=your_oauth_client_id_here
VITE_BACKEND_URL=http://localhost:8080

# =============================================================================
# User Service Configuration
# =============================================================================

# --- HTTP Server ---
HTTP_ADDR=:8080

# --- Authentik Configuration ---
# Base URL for Authentik instance
AUTHENTIK_BASE_URL=http://authentik:9000

# API token for Authentik admin operations (username sync, etc.)
# Get this from: Authentik Admin UI -> Tokens -> Create Token
AUTHENTIK_API_TOKEN=your_authentik_api_token_here

# --- OAuth Configuration (for BFF) ---
# These are the OAuth2/OIDC credentials from your Authentik provider
# Get these from: Authentik Admin UI -> Applications -> Your App -> Provider
AUTHENTIK_CLIENT_ID=your_oauth_client_id_here
AUTHENTIK_CLIENT_SECRET=your_oauth_client_secret_here

# --- Database Configuration ---
# PostgreSQL connection strings
POSTGRES_USER_DSN=postgres://user:pass@localhost:5432/userservice?sslmode=disable
POSTGRES_AUDIT_DSN=postgres://user:pass@localhost:5432/userservice?sslmode=disable

# --- Redis Configuration (for BFF Sessions) ---
# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Session TTL in hours (default: 24)
SESSION_TTL_HOURS=24

# =============================================================================
# Notes
# =============================================================================
# 
# BFF (Backend-for-Frontend) Configuration:
# -----------------------------------------
# The BFF feature is OPTIONAL. The user service will work without it.
# 
# To ENABLE BFF session management:
#   1. Set REDIS_URL to a valid Redis connection string
#   2. Set AUTHENTIK_CLIENT_ID to your OAuth client ID
#   3. Set AUTHENTIK_CLIENT_SECRET to your OAuth client secret
#
# To DISABLE BFF (use token-based auth only):
#   - Leave REDIS_URL empty, OR
#   - Leave AUTHENTIK_CLIENT_ID empty, OR
#   - Leave AUTHENTIK_CLIENT_SECRET empty
#
# When disabled, the service will log:
#   "BFF disabled: Redis or OAuth credentials not configured"
#
# =============================================================================
# Getting Authentik Credentials
# =============================================================================
#
# 1. AUTHENTIK_API_TOKEN:
#    - Go to Authentik Admin UI
#    - Navigate to: Directory -> Tokens
#    - Click "Create" and generate a token with appropriate permissions
#    - Copy the token value
#
# 2. AUTHENTIK_CLIENT_ID and AUTHENTIK_CLIENT_SECRET:
#    - Go to Authentik Admin UI
#    - Navigate to: Applications -> [Your Application]
#    - Click on the Provider (usually OAuth2/OIDC Provider)
#    - Find "Client ID" and "Client Secret"
#    - Copy both values
#
# =============================================================================
# Docker Compose Override
# =============================================================================
#
# For local development, you might want different values.
# Create a `.env.local` file with your overrides:
#
# AUTHENTIK_BASE_URL=http://localhost:9000
# REDIS_URL=redis://localhost:6379/0
# POSTGRES_USER_DSN=postgres://user:pass@localhost:5432/userservice?sslmode=disable
#
# =============================================================================